# https://taskfile.dev

version: 3

tasks:
  build-git:
    desc: "Build from source."
    env:
      GNOCI_BUILD_PATH: bin/git-remote-oci
    cmds:
      - dagger call build-git --src=. export --path {{ .GNOCI_GIT_BUILD_PATH }}

  build-git-lfs:
    desc: "Build from source."
    env:
      GNOCI_BUILD_PATH: bin/git-lfs-remote-oci
    cmds:
      - dagger call build-git-lfs --src=. export --path {{ .GNOCI_GIT_LFS_BUILD_PATH }}

  go-generate:
    desc: "Run go generate."
    sources:
      - "*.go"
      - "**/*.go"
    cmds:
      - go generate ./...

  release:
    desc: "Run release process."
    cmds:
      - ./release.sh -i
